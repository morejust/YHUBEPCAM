(window["webpackJsonpyhubepcam-kassa"]=window["webpackJsonpyhubepcam-kassa"]||[]).push([[0],{121:function(e,t,n){e.exports=n.p+"static/media/logo.8624eb1e.svg"},124:function(e,t,n){e.exports=n(214)},129:function(e,t,n){},130:function(e,t,n){},137:function(e,t,n){},214:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(119),l=n.n(c),o=(n(129),n(50)),u=n(21),s=(n(130),n(12)),i=n(48),p=n.n(i),m=(n(137),function(e){return e?"".concat(e.slice(0,5),"...").concat(e.slice(-3)):""}),d=function(e){return r.a.createElement("a",{href:"https://wavesexplorer.com/testnet/tx/".concat(e.txId),target:"_blank",rel:"noopener noreferrer"},m(e.txId))},f=n(13),E=n.n(f),h=n(34),b=n(26),g=n(49),v=b.broadcast,y=b.verify,O=b.waitForTx,w=b.libs,j=b.transfer;window.waves=b;var x="https://testnodes.wavesnodes.com";window.nodeUrl=x;var k="3MvgqcdKFrgrNjEbgtsV42Jd3KnkgkywWJY",S=function(){var e=Object(h.a)(E.a.mark(function e(t){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("tx",t),n=JSON.parse(t),console.log("parsed",n),console.log("verify",y(n)),e.abrupt("return",v(n,x));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(h.a)(E.a.mark(function e(){var t,n,a=arguments;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:k,n=a.length>1&&void 0!==a[1]?a[1]:100,e.abrupt("return",fetch("".concat(x,"/transactions/address/").concat(t,"/limit/").concat(n)).then(function(e){return e.json()}));case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),N=function(e){return g.items.find(function(t){return t.i===parseInt(e,10)})},I=function(e){var t=w.crypto.base58Decode(e.attachment),n=new TextDecoder("utf-8").decode(t).split(",");return console.log("products",n),console.log("decoded",n.map(function(e){return N(e)})),n.map(function(e){return N(e)}).filter(function(e){return!!e})},A=function(){var e=Object(h.a)(E.a.mark(function e(t,n){var a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=j({amount:1e8,recipient:t},n),e.abrupt("return",v(a,x));case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(h.a)(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O(t,{apiBase:x}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=function(e){console.log("resp",e);var t=e;console.log("Sent tx! hash=",t),x()},t=function(e){console.log("resp",e);var t=e;console.log("Sent tx! hash=",t),k()},n=function(e){console.error(e),P(e.message)},c=Object(a.useState)("none"),l=Object(s.a)(c,2),o=l[0],u=l[1],i=Object(a.useState)(null),m=Object(s.a)(i,2),f=m[0],E=m[1],h=Object(a.useState)(""),b=Object(s.a)(h,2),g=b[0],v=b[1],y=Object(a.useState)(null),O=Object(s.a)(y,2),w=O[0],j=O[1],x=function(){u("sent")},k=function(){u("paid")},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";u("error"),E(e)};return r.a.createElement("div",{className:"screen pay-screen"},r.a.createElement(p.a,{delay:300,resolution:1e3,onError:n,onScan:function(a){if(a){console.log("scanned",a);var r=a;g!==r&&(v(r),S(r).then(function(t){console.log("resp",t),e(t);var n=t.id;return j(n),D(n)}).then(function(e){return t(e)}).catch(function(e){return n(e)}))}},style:{padding:"50px",maxWidth:"500px",margin:"0 auto"}}),r.a.createElement("span",{style:{display:"inline-block",padding:"40px"}},"(c) YHUBEPCAM"),r.a.createElement("div",{className:"overlay overlay-".concat(o),onClick:function(){u("hide")}},"sent"===o&&r.a.createElement("span",null,"Sending... ",r.a.createElement(d,{txId:w})),"paid"===o&&r.a.createElement("span",null,"Paid!"),"error"===o&&r.a.createElement("span",null,"Error: ",f),"none"===o&&r.a.createElement("span",null,"Please, scan signed tx."),"list"===o&&r.a.createElement("div",null,r.a.createElement("span",null,"- Moloko"),r.a.createElement("span",null,"- Bread"))))},B=n(121),U=n.n(B),J=function(){return r.a.createElement("header",{className:"App-header"},r.a.createElement(o.b,{to:"/pay"},r.a.createElement("img",{src:U.a,className:"App-logo",alt:"logo"})),r.a.createElement("p",null,"Tap to scan QR code."))},R=n(20),W=function(e){return r.a.createElement("a",{href:"https://wavesexplorer.com/testnet/address/".concat(e.address),target:"_blank",rel:"noopener noreferrer"},m(e.address))};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var C=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(!0),o=Object(s.a)(l,2),u=o[0],i=o[1];return Object(a.useEffect)(function(){P().then(function(e){return e[0].map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach(function(t){Object(R.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{products:I(e)})})}).then(function(e){return c(e)}).then(function(){return i(!1)}).catch(function(e){return alert(e.message)})},[]),console.log("transactions",n),u?r.a.createElement("header",{className:"App-header"},"Loading..."):r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Kassa address: ",r.a.createElement(W,{address:k})),r.a.createElement("table",{border:"1"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"TX ID"),r.a.createElement("th",null,"SENDER"),r.a.createElement("th",null,"TIME"),r.a.createElement("th",null,"VALUE"),r.a.createElement("th",null,"PRODUCT LIST"))),r.a.createElement("tbody",null,n.map(function(e,t){return r.a.createElement("tr",{key:t,style:{paddingTop:"30px"}},r.a.createElement("td",null,r.a.createElement(d,{txId:e.id})),r.a.createElement("td",null,r.a.createElement(W,{address:e.sender})),r.a.createElement("td",null,new Date(e.timestamp).toLocaleString()),r.a.createElement("td",null,(e.amount/1e5).toFixed(2)||"0"," RUB"),r.a.createElement("td",null,(e.products||[]).map(function(e){return r.a.createElement("a",{href:"/products/".concat(e.i),style:{display:"block"}},e.n)})||"-"))}))))},H=function(e){var t=e.match.params.id;console.log(t);var n=g.items.find(function(e){return e.i===parseInt(t,10)});return n?r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Product ",t),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,n.i)),r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,n.n)),r.a.createElement("tr",null,r.a.createElement("td",null,"Image"),r.a.createElement("td",null,r.a.createElement("img",{src:n.p,style:{maxWidth:"300px",maxHeight:"300px"},alt:""}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Price"),r.a.createElement("td",null,n.amount," RUB")))):r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Product not found"))},L={sent:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f...",paid:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e!"},Y=function(e){var t=Object(a.useState)(null),n=Object(s.a)(t,2),c=n[0],l=n[1],o=Object(a.useState)(null),u=Object(s.a)(o,2),i=u[0],m=u[1],f=Object(a.useState)(null),E=Object(s.a)(f,2),h=E[0],b=E[1],g=Object(a.useState)(null),v=Object(s.a)(g,2),y=v[0],O=v[1],w=function(e){return m(e.message)};return r.a.createElement("div",{className:"screen faucet-screen"},r.a.createElement("div",{style:{paddingTop:"2rem"}},"\xa0"),r.a.createElement("h1",null,"\u041f\u043e\u043b\u0443\u0447\u0438 \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0435 \u0440\u0443\u0431\u043b\u0438 \u043d\u0430 \u043f\u043e\u043a\u0443\u043f\u043a\u0438 \u0447\u0435\u0440\u0435\u0437 \u0431\u043b\u043e\u043a\u0447\u0435\u0439\u043d!"),i&&r.a.createElement("div",{style:{color:"red"}},"Error: ",i),y&&r.a.createElement("h1",null,L[y]),"paid"===y&&r.a.createElement("h1",null,r.a.createElement("a",{href:"/pay"},"Now PAY")),c&&r.a.createElement("span",null,"Address: ",r.a.createElement(W,{address:c})),r.a.createElement("br",null),h&&r.a.createElement("span",null,"TX ID: ",r.a.createElement(d,{txId:h})),r.a.createElement(p.a,{delay:300,resolution:1e3,onError:w,onScan:function(e){if(e){console.log("scanned",e);var t=e;c!==t&&(l(t),A(t,"liquid trade skirt elbow employ bomb cradle genius liberty mean tape profit").then(function(e){return b(e.id),O("sent"),D(e.id)}).then(function(e){return O("paid")}).catch(function(e){return w(e)}))}},style:{padding:"50px",maxWidth:"500px",margin:"0 auto"}}),r.a.createElement("span",{style:{display:"inline-block",padding:"40px"}},"(c) YHUBEPCAM"))};var q=function(){return r.a.createElement(o.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(u.a,{path:"/pay",component:T}),r.a.createElement(u.a,{path:"/faucet",component:Y}),r.a.createElement(u.a,{path:"/transactions",component:C}),r.a.createElement(u.a,{path:"/products/:id",component:H}),r.a.createElement(u.a,{exact:!0,path:"/",component:J})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},49:function(e){e.exports=JSON.parse('{"items":[{"i":123,"n":"\u041c\u043e\u043b\u043e\u043a\u043e \'\u041f\u0440\u043e\u0441\u0442\u043e\u043a\u0432\u0430\u0448\u0438\u043d\u043e\' 3.2, 1\u043b","amount":78.9,"p":"http://bit.ly/2k37PZO"},{"i":333,"n":"\u041f\u0435\u043b\u044c\u043c\u0435\u043d\u0438 \'Russian Hackers\'","amount":150.9,"p":"http://bit.ly/2k1cewi"},{"i":456,"n":"\u041f\u0430\u043a\u0435\u0442 \'\u041c\u0430\u0439\u043a\u0430\'","amount":2,"p":"http://bit.ly/2m6UBvV"},{"i":1377,"n":"\u041f\u0435\u0447\u0435\u043d\u044c\u0435 \'\u042e\u0431\u0438\u043b\u0435\u0439\u043d\u043e\u0435\'","amount":29.9,"p":"http://bit.ly/2k1jsAq"}]}')},56:function(e,t){}},[[124,1,2]]]);
//# sourceMappingURL=main.6c03f45b.chunk.js.map